{"version":3,"file":null,"sources":["../src/polyfills/objectAssign.js","../src/logEvent.ts","../src/messageTemplate.ts","../src/logger.ts","../src/consoleSink.ts","../src/loggerConfiguration.ts","../src/index.ts"],"sourcesContent":["/**\r\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n */\r\nif (typeof Object.assign != 'function') {\r\n  Object.assign = function (target, varArgs) {\r\n    'use strict';\r\n    if (target == null) {\r\n      throw new TypeError('Cannot convert undefined or null to object');\r\n    }\r\n\r\n    var to = Object(target);\r\n\r\n    for (var index = 1; index < arguments.length; index++) {\r\n      var nextSource = arguments[index];\r\n\r\n      if (nextSource != null) {\r\n        for (var nextKey in nextSource) {\r\n          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n            to[nextKey] = nextSource[nextKey];\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return to;\r\n  };\r\n}\r\n","import { MessageTemplate } from './messageTemplate';\r\n\r\n/**\r\n * Represents the severity level of a log event.\r\n */\r\nexport enum LogEventLevel {\r\n  off =         0,\r\n  fatal =       1 << 0,\r\n  error =       fatal       | 1 << 1,\r\n  warning =     error       | 1 << 2,\r\n  information = warning     | 1 << 3,\r\n  debug =       information | 1 << 4,\r\n  verbose =     debug       | 1 << 5\r\n}\r\n\r\n/**\r\n * Checks if a log event level includes the target log event level.\r\n * @param {LogEventLevel} level The level to check.\r\n * @param {LogEventLevel} target The target level.\r\n * @returns True if the checked level contains the target level.\r\n */\r\nexport function isEnabled(level: LogEventLevel, target: LogEventLevel): boolean {\r\n  return (level & target) === target;\r\n}\r\n\r\n/**\r\n * Represents a log event.\r\n */\r\nexport class LogEvent {\r\n  /**\r\n   * Creates a new log event instance.\r\n   */\r\n  constructor(timestamp: string, level: LogEventLevel, messageTemplate: MessageTemplate, properties?: Object) {\r\n    this.timestamp = timestamp;\r\n    this.level = level;\r\n    this.messageTemplate = messageTemplate;\r\n    this.properties = properties || {};\r\n  }\r\n\r\n  /**\r\n   * Gets or sets an ISO 8601-formatted date string for when this event occurred.\r\n   * @example YYYY-MM-DDTHH:mm:ss.sssZ\r\n   */\r\n  timestamp: string;\r\n\r\n  /**\r\n   * Gets or sets the severity level of this event.\r\n   */\r\n  level: LogEventLevel;\r\n\r\n  /**\r\n   * Gets or sets the message template instance of this event.\r\n   */\r\n  messageTemplate: MessageTemplate;\r\n\r\n  /**\r\n   * Gets or sets an object containing the captured properties of this event.\r\n   */\r\n  properties: Object;\r\n}\r\n","const tokenizer = /\\{@?\\w+}/g;\r\n\r\ninterface Token {\r\n  name?: string;\r\n  text?: string;\r\n  destructure?: boolean;\r\n  raw?: string;\r\n}\r\n\r\n/**\r\n * Represents a message template that can be rendered into a log message.\r\n */\r\nexport class MessageTemplate {\r\n  /**\r\n   * Gets or sets the raw message template of this instance.\r\n   */\r\n  raw: string;\r\n\r\n  private tokens: Token[];\r\n\r\n  /**\r\n   * Creates a new MessageTemplate instance with the given template.\r\n   */\r\n  constructor(messageTemplate: string) {\r\n    if (messageTemplate === null || !messageTemplate.length) {\r\n      throw new Error('Argument \"messageTemplate\" is required.');\r\n    }\r\n\r\n    this.raw = messageTemplate;\r\n    this.tokens = this.tokenize(messageTemplate);\r\n  }\r\n\r\n  /**\r\n   * Renders this template using the given properties.\r\n   * @param {Object} properties Object containing the properties.\r\n   * @returns Rendered message.\r\n   */\r\n  render(properties?: Object): string {\r\n    if (!this.tokens.length) {\r\n      return this.raw;\r\n    }\r\n    properties = properties || {};\r\n    const result = [];\r\n    for (var i = 0; i < this.tokens.length; ++i) {\r\n      const token = this.tokens[i];\r\n      if (typeof token.name === 'string') {\r\n        if (properties.hasOwnProperty(token.name)) {\r\n          result.push(this.toText(properties[token.name]));\r\n        } else {\r\n          result.push(token.raw);\r\n        }\r\n      } else {\r\n        result.push(token.text);\r\n      }\r\n    }\r\n    return result.join('');\r\n  }\r\n\r\n  /**\r\n   * Binds the given set of args to their matching tokens.\r\n   * @param {any} positionalArgs Arguments.\r\n   * @returns Object containing the properties.\r\n   */\r\n  bindProperties(positionalArgs: any): Object {\r\n    const result = {};\r\n    let nextArg = 0;\r\n    for (var i = 0; i < this.tokens.length && nextArg < positionalArgs.length; ++i) {\r\n      const token = this.tokens[i];\r\n      if (typeof token.name === 'string') {\r\n        let p = positionalArgs[nextArg];\r\n        result[token.name] = this.capture(p, token.destructure);\r\n        nextArg++;\r\n      }\r\n    }\r\n\r\n    while (nextArg < positionalArgs.length) {\r\n      const arg = positionalArgs[nextArg];\r\n      if (typeof arg !== 'undefined') {\r\n        result['a' + nextArg] = this.capture(arg);\r\n      }\r\n      nextArg++;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  private tokenize(template: string): Token[] {\r\n    const tokens = [];\r\n\r\n    let result;\r\n    let textStart;\r\n\r\n    while ((result = tokenizer.exec(template)) !== null) {\r\n      if (result.index !== textStart) {\r\n        tokens.push({ text: template.slice(textStart, result.index) });\r\n      }\r\n\r\n      let destructure = false;\r\n\r\n      let token = result[0].slice(1, -1);\r\n      if (token.indexOf('@') === 0) {\r\n        token = token.slice(1);\r\n        destructure = true;\r\n      }\r\n\r\n      tokens.push({\r\n        name: token,\r\n        destructure,\r\n        raw: result[0]\r\n      });\r\n\r\n      textStart = tokenizer.lastIndex;\r\n    }\r\n\r\n    if (textStart >= 0 && textStart < template.length) {\r\n      tokens.push({ text: template.slice(textStart) });\r\n    }\r\n\r\n    return tokens;\r\n  }\r\n\r\n  private toText(property: any): string {\r\n    if (typeof property === 'undefined') {\r\n      return 'undefined';\r\n    }\r\n\r\n    if (property === null) {\r\n      return 'null';\r\n    }\r\n\r\n    if (typeof property === 'string') {\r\n      return property;\r\n    }\r\n\r\n    if (typeof property === 'number') {\r\n      return property.toString();\r\n    }\r\n\r\n    if (typeof property === 'boolean') {\r\n      return property.toString();\r\n    }\r\n\r\n    if (typeof property.toISOString === 'function') {\r\n      return property.toISOString();\r\n    }\r\n\r\n    if (typeof property === 'object') {\r\n      let s = JSON.stringify(property);\r\n      if (s.length > 70) {\r\n        s = s.slice(0, 67) + '...';\r\n      }\r\n\r\n      return s;\r\n    }\r\n\r\n    return property.toString();\r\n  };\r\n\r\n  private capture(property: any, destructure?: boolean): Object {\r\n    if (typeof property === 'function') {\r\n      return property.toString();\r\n    }\r\n\r\n    if (typeof property === 'object') {\r\n      // null value will be automatically stringified as \"null\", in properties it will be as null\r\n      // otherwise it will throw an error\r\n      if (property === null) {\r\n        return property;\r\n      }\r\n\r\n      // Could use instanceof Date, but this way will be kinder\r\n      // to values passed from other contexts...\r\n      if (destructure || typeof property.toISOString === 'function') {\r\n        return property;\r\n      }\r\n\r\n      return property.toString();\r\n    }\r\n\r\n    return property;\r\n  }\r\n}\r\n","import { LogEventLevel, LogEvent } from './logEvent';\r\nimport { MessageTemplate } from './messageTemplate';\r\nimport { Pipeline } from './pipeline';\r\n\r\n/**\r\n * Logs events.\r\n */\r\nexport class Logger {\r\n  private pipeline: Pipeline;\r\n\r\n  /**\r\n   * Creates a new logger instance using the specified pipeline.\r\n   */\r\n  constructor(pipeline: Pipeline) {\r\n    this.pipeline = pipeline;\r\n  }\r\n\r\n  /**\r\n   * Logs an event with the {@link LogEventLevel.fatal} severity.\r\n   * @param {string} messageTemplate Message template for the log event.\r\n   * @param {any[]} properties Properties that can be used to render the message template.\r\n   */\r\n  fatal(messageTemplate: string, ...properties: any[]) {\r\n    this.write(LogEventLevel.fatal, messageTemplate, properties);\r\n  }\r\n  \r\n  /**\r\n   * Logs an event with the {@link LogEventLevel.error} severity.\r\n   * @param {string} messageTemplate Message template for the log event.\r\n   * @param {any[]} properties Properties that can be used to render the message template.\r\n   */\r\n  error(messageTemplate: string, ...properties: any[]) {\r\n    this.write(LogEventLevel.error, messageTemplate, properties);\r\n  }\r\n  \r\n  /**\r\n   * Logs an event with the {@link LogEventLevel.warning} severity.\r\n   * @param {string} messageTemplate Message template for the log event.\r\n   * @param {any[]} properties Properties that can be used to render the message template.\r\n   */\r\n  warn(messageTemplate: string, ...properties: any[]) {\r\n    this.write(LogEventLevel.warning, messageTemplate, properties);\r\n  }\r\n  \r\n  /**\r\n   * Logs an event with the {@link LogEventLevel.information} severity.\r\n   * @param {string} messageTemplate Message template for the log event.\r\n   * @param {any[]} properties Properties that can be used to render the message template.\r\n   */\r\n  info(messageTemplate: string, ...properties: any[]) {\r\n    this.write(LogEventLevel.information, messageTemplate, properties);\r\n  }\r\n  \r\n  /**\r\n   * Logs an event with the {@link LogEventLevel.debug} severity.\r\n   * @param {string} messageTemplate Message template for the log event.\r\n   * @param {any[]} properties Properties that can be used to render the message template.\r\n   */\r\n  debug(messageTemplate: string, ...properties: any[]) {\r\n    this.write(LogEventLevel.debug, messageTemplate, properties);\r\n  }\r\n  \r\n  /**\r\n   * Logs an event with the {@link LogEventLevel.verbose} severity.\r\n   * @param {string} messageTemplate Message template for the log event.\r\n   * @param {any[]} properties Properties that can be used to render the message template.\r\n   */\r\n  verbose(messageTemplate: string, ...properties: any[]) {\r\n    this.write(LogEventLevel.verbose, messageTemplate, properties);\r\n  }\r\n\r\n  /**\r\n   * Flushes the pipeline of this logger.\r\n   * @returns A {Promise<any>} that will resolve when the pipeline has been flushed.\r\n   */\r\n  flush(): Promise<any> {\r\n    return this.pipeline.flush();\r\n  }\r\n\r\n  private write(level: LogEventLevel, rawMessageTemplate: string, ...unboundProperties: any[]) {\r\n    const messageTemplate = new MessageTemplate(rawMessageTemplate);\r\n    const properties = messageTemplate.bindProperties(unboundProperties);\r\n    const logEvent = new LogEvent(\r\n      new Date().toISOString(),\r\n      level,\r\n      messageTemplate,\r\n      properties\r\n    );\r\n    this.pipeline.emit([logEvent]);\r\n  }\r\n}\r\n","import { LogEventLevel, LogEvent } from './logEvent';\r\nimport { Sink } from './sink';\r\nimport { MessageTemplate } from './messageTemplate';\r\n\r\nexport interface ConsoleProxy {\r\n  error(message?: any, ...properties: any[]);\r\n  warn(message?: any, ...properties: any[]);\r\n  info(message?: any, ...properties: any[]);\r\n  debug(message?: any, ...properties: any[]);\r\n  log(message?: any, ...properties: any[]);\r\n}\r\n\r\nexport interface ConsoleSinkOptions {\r\n  consoleProxy?: any;\r\n  includeTimestamps?: boolean;\r\n  includeProperties?: boolean;\r\n}\r\n\r\nexport class ConsoleSink implements Sink {\r\n  private options: ConsoleSinkOptions;\r\n  private consoleProxy: ConsoleProxy;\r\n\r\n  constructor(options?: ConsoleSinkOptions) {\r\n    this.options = options || {};\r\n    const internalConsole = this.options.consoleProxy || typeof console !== 'undefined' && console || null;\r\n    const stub = function () { };\r\n    this.consoleProxy = {\r\n      error: (internalConsole && (internalConsole.error || internalConsole.log)) || stub,\r\n      warn:  (internalConsole && (internalConsole.warn || internalConsole.log)) || stub,\r\n      info:  (internalConsole && (internalConsole.info || internalConsole.log)) || stub,\r\n      debug: (internalConsole && (internalConsole.debug || internalConsole.log)) || stub,\r\n      log:   (internalConsole && internalConsole.log) || stub\r\n    };\r\n  }\r\n\r\n  public emit(events: LogEvent[]) {\r\n    for (let i = 0; i < events.length; ++i) {\r\n      const e = events[i];\r\n      switch (e.level) {\r\n        case LogEventLevel.fatal:\r\n          this.writeToConsole(this.consoleProxy.error, 'Fatal', e);\r\n          break;\r\n\r\n        case LogEventLevel.error:\r\n          this.writeToConsole(this.consoleProxy.error, 'Error', e);\r\n          break;\r\n\r\n        case LogEventLevel.warning:\r\n          this.writeToConsole(this.consoleProxy.warn, 'Warning', e);\r\n          break;\r\n          \r\n        case LogEventLevel.debug:\r\n          this.writeToConsole(this.consoleProxy.debug, 'Debug', e);\r\n          break;\r\n          \r\n        case LogEventLevel.verbose:\r\n          this.writeToConsole(this.consoleProxy.debug, 'Verbose', e);\r\n          break;\r\n\r\n        case LogEventLevel.information:\r\n        default: \r\n          this.writeToConsole(this.consoleProxy.info, 'Information', e);\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  public flush() {\r\n    return Promise.resolve();\r\n  }\r\n\r\n  private writeToConsole(logMethod: Function, prefix: string, e: LogEvent) {\r\n    let output = '[' + prefix + '] ' + e.messageTemplate.render(e.properties);\r\n    if (this.options.includeTimestamps) {\r\n      output = e.timestamp + ' ' + output;\r\n    }\r\n    const values = [];\r\n    if (this.options.includeProperties) {\r\n      for (const key in e.properties) {\r\n        if (e.properties.hasOwnProperty(key)) {\r\n          values.push(e.properties[key]);\r\n        }\r\n      }\r\n    }\r\n    logMethod(output, ...values);\r\n  }\r\n}\r\n","export class LoggerConfiguration {\r\n\r\n}\r\n","import './polyfills/objectAssign';\r\n\r\nexport { LogEventLevel } from './logEvent';\r\nexport { Logger } from './logger';\r\nexport { ConsoleSink } from './consoleSink';\r\n\r\nimport { LoggerConfiguration } from './loggerConfiguration';\r\n\r\nexport function configure() {\r\n  return new LoggerConfiguration();\r\n}\r\n\r\nexport { LoggerConfiguration };\r\n"],"names":[],"mappings":"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"}